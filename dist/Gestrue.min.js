!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Gestrue=e():t.Gestrue=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=1)}([function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=t;n;){if(n.contains(e)||n===e)return n;n=n.parentNode}return null}function a(t,e,n,r,i,o,a,s){var c=Math.atan2(s-o,a-i)-Math.atan2(r-e,n-t),u=Math.sqrt((Math.pow(s-o,2)+Math.pow(a-i,2))/(Math.pow(r-e,2)+Math.pow(n-t,2))),l=[i-u*t*Math.cos(c)+u*e*Math.sin(c),o-u*e*Math.cos(c)-u*t*Math.sin(c)];return{rotate:c,scale:u,translate:l,matrix:[[u*Math.cos(c),-u*Math.sin(c),l[0]],[u*Math.sin(c),u*Math.cos(c),l[1]],[0,0,1]]}}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(){function t(e){var n=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["tap","doubletap","panstart","horizontalpanstart","verticalpanstart","pan","horizontalpan","verticalpan","panend","flick","horizontalflick","verticalflick","press","pressend"];i(this,t),this.gestures={},this.lastTap=null,this.touchstartHandler=function(t){0===Object.keys(n.gestures).length&&n.addEvent();for(var e=function(e,r){var i=t.changedTouches[e],o={};for(var a in i)o[a]=i[a];var s=n,c={startTouch:o,startTime:Date.now(),status:"tapping",element:t.srcElement||t.target,pressingHandler:setTimeout(function(e){return function(){"tapping"===c.status&&(c.status="pressing",s.fireEvent(e,"press",{touchEvent:t})),clearTimeout(c.pressingHandler),c.pressingHandler=null}}(t.srcElement||t.target),500)};n.gestures[i.identifier]=c},i=0,a=t.changedTouches.length;i<a;i++)e(i,a);if(2===Object.keys(n.gestures).length){var s=[];for(var c in n.gestures)s.push(n.gestures[c].element);n.fireEvent(o(s[0],s[1]),"dualtouchstart",{touches:[].concat(r(t.touches)),touchEvent:t})}},this.touchmoveHandler=function(t){for(var e=0,r=t.changedTouches.length;e<r;e++){var i=t.changedTouches[e],s=n.gestures[i.identifier];if(!s)return;s.lastTouch||(s.lastTouch=s.startTouch),s.lastTime||(s.lastTime=s.startTime),s.velocityX||(s.velocityX=0),s.velocityY||(s.velocityY=0),s.duration||(s.duration=0);var c=Date.now()-s.lastTime,u=(i.clientX-s.lastTouch.clientX)/c,l=(i.clientY-s.lastTouch.clientY)/c,h=70;c>h&&(c=h),s.duration+c>h&&(s.duration=h-c),s.velocityX=(s.velocityX*s.duration+u*c)/(s.duration+c),s.velocityY=(s.velocityY*s.duration+l*c)/(s.duration+c),s.duration+=c,s.lastTouch={};for(var f in i)s.lastTouch[f]=i[f];s.lastTime=Date.now();var v=i.clientX-s.startTouch.clientX,p=i.clientY-s.startTouch.clientY,d=Math.sqrt(Math.pow(v,2)+Math.pow(p,2));("tapping"===s.status||"pressing"===s.status)&&d>10&&(s.status="panning",s.isVertical=!(Math.abs(v)>Math.abs(p)),s.isLeft=v<0,s.isTop=p<0,n.fireEvent(s.element,"panstart",{touch:i,touchEvent:t,isVertical:s.isVertical,isLeft:s.isLeft,isTop:s.isTop}),n.fireEvent(s.element,(s.isVertical?"vertical":"horizontal")+"panstart",{touch:i,touchEvent:t})),"panning"===s.status&&(s.panTime=Date.now(),n.fireEvent(s.element,"pan",{displacementX:v,displacementY:p,touch:i,touchEvent:t,isVertical:s.isVertical,isLeft:s.isLeft,isTop:s.isTop}),s.isVertical?n.fireEvent(s.element,"verticalpan",{displacementY:p,touch:i,touchEvent:t}):n.fireEvent(s.element,"horizontalpan",{displacementX:v,touch:i,touchEvent:t}))}if(2===Object.keys(n.gestures).length){for(var m=[],g=[],y=[],E=void 0,T=0,b=t.touches.length;T<b;T++){var M=t.touches[T],X=n.gestures[M.identifier];m.push([X.startTouch.clientX,X.startTouch.clientY]),g.push([M.clientX,M.clientY])}for(var Y in n.gestures)y.push(n.gestures[Y].element);E=a(m[0][0],m[0][1],m[1][0],m[1][1],g[0][0],g[0][1],g[1][0],g[1][1]),n.fireEvent(o(y[0],y[1]),"dualtouch",{transform:E,touches:t.touches,touchEvent:t})}},this.touchendHandler=function(t){if(2===Object.keys(n.gestures).length){var e=[];for(var i in n.gestures)e.push(n.gestures[i].element);n.fireEvent(o(e[0],e[1]),"dualtouchend",{touches:[].concat(r(t.touches)),touchEvent:t})}for(var a=0,s=t.changedTouches.length;a<s;a++){var c=t.changedTouches[a],u=c.identifier,l=n.gestures[u];if(l){if(l.pressingHandler&&(clearTimeout(l.pressingHandler),l.pressingHandler=null),"tapping"===l.status&&(l.timestamp=Date.now(),n.fireEvent(l.element,"tap",{touch:c,touchEvent:t}),n.lastTap&&l.timestamp-n.lastTap.timestamp<300&&n.fireEvent(l.element,"doubletap",{touch:c,touchEvent:t}),n.lastTap=l),"panning"===l.status){var h=Date.now(),f=h-l.startTime,v=c.clientX-l.startTouch.clientX,p=c.clientY-l.startTouch.clientY,d=Math.sqrt(l.velocityY*l.velocityY+l.velocityX*l.velocityX),m=d>.5&&h-l.lastTime<100,g={duration:f,isflick:m,displacementX:v,displacementY:p,touch:c,velocityX:l.velocityX,velocityY:l.velocityY,touchEvent:t,isVertical:l.isVertical,isLeft:l.isLeft,isTop:l.isTop};n.fireEvent(l.element,"panend",g),m&&(n.fireEvent(l.element,"flick",g),l.isVertical?n.fireEvent(l.element,"verticalflick",g):n.fireEvent(l.element,"horizontalflick",g))}"pressing"===l.status&&n.fireEvent(l.element,"pressend",{touch:c,touchEvent:t}),delete n.gestures[u]}}0===Object.keys(n.gestures).length&&n.removeEvent()},this.container=document.querySelector(e),this.container&&(this.evnetList=s,this.container.addEventListener("touchstart",this.touchstartHandler,!1))}return c(t,[{key:"destory",value:function(){this.removeEvent(),this.container.removeEventListener("touchstart",this.touchstartHandler,!1)}},{key:"removeEvent",value:function(){this.container.removeEventListener("touchmove",this.touchmoveHandler,!1),this.container.removeEventListener("touchend",this.touchendHandler,!1),this.container.removeEventListener("touchcancel",this.touchendHandler,!1)}},{key:"addEvent",value:function(){this.container.addEventListener("touchmove",this.touchmoveHandler,!1),this.container.addEventListener("touchend",this.touchendHandler,!1),this.container.addEventListener("touchcancel",this.touchendHandler,!1)}},{key:"fireEvent",value:function(t,e,n){if(t&&this.evnetList.indexOf(e)!==-1){var r=document.createEvent("HTMLEvents");if(r.initEvent(e,!0,!0),"object"===("undefined"==typeof n?"undefined":s(n)))for(var i in n)r[i]=n[i];t.dispatchEvent(r)}}}]),t}();t.exports=u},function(t,e,n){t.exports=n(0)}])});